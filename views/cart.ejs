<!DOCTYPE html>
<html lang="en">
  <head>
    <title>login</title>
    <!-- Required meta tags -->
    <%- include("partials/user_head.ejs") %>
    <style>
      .checkout_continue {
        display: flex;
        flex-direction: row;
        gap: 1rem;
      }
    </style>
  </head>

  <body>
    <header>
      <!-- navbar -->
      <%- include("partials/user_navbar1.ejs") %> <%-
      include("partials/user_navbar2.ejs") %>
    </header>
    <main>
      <%- include("partials/flash.ejs") %> <% if (cartCount === 0){%>
      <div class="container center-align">
        <h1>Your shopping cart is empty!</h1>
        <div class="checkout_continue">
          <a
            href="/"
            class="btn waves-effect waves-light"
            type="submit"
            name="action"
            >Continue Shopping
            <i class="material-icons right"> shopping_basket</i>
          </a>
        </div>
      </div>
      <%} else { %> 
        
        <div class="container">
          <table class="responsive-table">
            <thead>
              <tr>
                <th>Product Title</th>
                <th>Product Image</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total price</th>
                <th colspan="2">operations</th>
              </tr>
            </thead>
  
            <tbody>
              <% cart.forEach(item=>{%>
              <tr>
                <td><%= item.product_name %></td>
                <td>
                  <img
                    src="../public/uploads/<%= item.image %>"
                    alt="image"
                    style="width: 5rem; object-fit: contain"
                  />
                </td>
                <td>
                  <input
                    type="number"
                    value="<%= item.quantity %>"
                    style="width: 3rem"
                    min="1"
                  />
                </td>
                <td><%= item.price %></td>
                <td><%= (item.price*item.quantity).toFixed(2) %></td>
                <td>update</td>
                <td><a href="/remove-from-cart/<%= item.id %>">remove</a></td>
              </tr>
              <% }) %>
            </tbody>
          </table>
          <br /><br />
  
          <h3>Subtotal: $<%= totalPrice.toFixed(2) %></h3>
  
          <div class="checkout_continue">
            <a
              href="/payment"
              class="btn waves-effect waves-light"
              type="submit"
              name="action"
              >Checkout
              <i class="material-icons right">send</i>
            </a>
  
            <a
              href="/"
              class="btn waves-effect waves-light"
              type="submit"
              name="action"
              >Continue Shopping
              <i class="material-icons right"> shopping_basket</i>
            </a>
          </div>
        </div><br><br>
        
        <% }%>

    </main>

    <!-- footer  -->
    <%- include("partials/admin_footer.ejs") %>
  </body>
  <%- include("partials/user_foot.ejs") %>
</html>
